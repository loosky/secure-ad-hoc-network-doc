\chapter{Discussion}
\label{ch:discussion}
\acresetall


\section{Why ECC?}
ECC has short key sizes compared to same strength RSA keys.

RSA have less energy consumption (claimed by \cite{hosseinisecure}) - need to
check it out, or at least mention somewhere\ldots

\section{Routing Authentication Solution}
\label{sect:routing_auth_solution}
As proposed in Chapter \ref{ch:design} the proposed system design uses an novel
solution to continuously verify routing announcements received from ones
neighbors.

For this system to be used on typical mobile devices with all their constraints,
one has to acknowledge the limitations to computing power, battery lifetime, and
saturation in the wireless network.

Because all nodes in a \ac{MANET} using a pro-active routing protocol broadcasts
their routing announcements and forward all received routing announcements, the
network traffic will increase exponentially to the amount of nodes in the
network and how closely bound they are. Therefore all routing announcements
needs to be as small as possible, as discussed by several others before [TODO:
find some refs, multiple]. A typical signature is usually on the order of one or
two larger than a regular routing announcement, so by adding a signature to the
routing announcement - most of the data sent in the network would be signature
data. This is far from ideal.

The first solution that one would think of would be to only sign a very few of
the announcements, periodically. This however, would be totally disastrous. This
would have no protection against spoofing attacks whatsoever, as an attacker
could wait for a legitimate node to send a signed announcement and then send his
own fake announcements spoofed with the legitimate node's address.

The solution proposed in this thesis, solves the problem in a different manner.
Periodically, more than a second and less than a minute, a node sends a special
packet to all its direct neighbors. The packet contains a random value string,
a temporary symmetric key and a signed hash value of the packet (HMAC). Each
copy of the packet is also encrypted with the neighbors' public key in order to
keep the random value and symmetric key hidden from adversaries.

Now, each neighbor shares a secret with the node and this can be used in a trust
scheme on the following routing announcements. The node and its neighbors
computes a new value by encrypting the previously sent random value with the
corresponding symmetric key. This value is then split in parts, or extracts, of
16 bits. Each extract is then appended, along with an offset value declaring at
which offset of the whole value the 16 bits belongs, to all routing
announcements the node sends - both his own and rebroadcasts of other nodes'
announcements. Each offset of 16 bits will only be allowed to be sent once, as
to avoid replay attacks using the same values. 

Neighbors can now easily check whether the extract it receives matches the
correct offset in the value it computed, and if it does the neighbor will trust
the announcement is actually sent by the legitemate node. 

This scheme is fully based on trust. You trust that your trusted nodes will only
send you its own annoucement (correctly) and rebroadcast only its trusted nodes
announcements without modification. If for some reason a trusted node should
behave maliciously, this scheme will not detect this and allow the trusted node
to potentially disrupt the network.

\subsection{Routing Announcement Modification}
The \ac{MAC} value extract appended to the routing announcements could have been
used with the routing announcements without adding extra bits to the message. By
using a simple technique such as XOR'ing the extract with e.g. the originator
address field of the packet one would save 16 bits of extra overhead on each
packet.

There are two reasons why this is not done in this design proposal:

\begin{itemize}
  \item It would not be modular to different protocols, but be BATMAN specific,
  and
  \item It might confuse the reader to beleive it is would increase the security
  of the protocol.
\end{itemize}

That said, in real life implementations it should probably be done for saving
the overhead.

Because the different ad hoc routing protocols this design is created for are
pro-active protocols sending packets over the network layer, the IP addresses of
each node will, and must be, visible in the IP packet. Using the address inside
the routing announcement XOR'ed with the \ac{MAC} value extract would hide this
address from an observer, but the observer would be able to see the address in
the network layer packet - so in the end, no information has been hidden from
the observer after all.

\section{Compromised Trusted Nodes}
One attack vector not previously discussed in this thesis is an internal attack
from a trusted node that acts maliciously - typically a compromised node which
have previously been trusted to participate in the network.

The solution proposed does not handle this attack vector, as it assumes all
trusted neighbors acts with good intentions. However, this is a broadly
discussed field of research and several solutions have been proposed
\cite{Pirzada_McDonald} \cite{dhurandher2010network}. In both of these papers
the authors generate a trust value of their neighbors based on observed
behaviour. For instance, after sending a message to a non-neighbor in the
network, you would expect your mutually trusted neighbor on the path between
you and the recipient of your message to forward your packet. After sending the
packet, you can check whether your neighbor actually forwards the packet by
sniffing for the recipients address in promiscous mode. If no packet is ever
sent from your neighbor, this can lead you to believe hi is a black hole. If you
observe several possible malicious acts by a neighbor, you can choose to not
trust this neighbor anymore and add it to a blacklist.

This kind of solution, among others, already exist and should be incorporated in
addition to the design proposed in this thesis. Without this form of neighbor
checking, you cannot trust your neighbor and therefore not use this design at
all. To clarify once more - the solution proposed in this thesis only covers
external attacks, whereas the attack vector mentioned in this section is an
internal attack.

TODO: Trengs det noe mer?

\section{Future Work}

\section{Limitations}

\subsection{IP Address Configuration}\label{ip_address_conf}